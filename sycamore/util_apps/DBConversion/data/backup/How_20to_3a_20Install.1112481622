= Getting the software =
Obviously, the first step is to download the software.  Right now the only way to do is is via our [http://subversion.tigris.org/ subversion] server.  Our repository is located at http://daviswiki.org/repos.  If you don't know anything about subversion but have it installed, typing {{{svn checkout http://daviswiki.org/repos/trunk working_copy}}} will grab the code and put it in the directory {{{working_copy}}}.

= Overview =

Fundimentally you will be performing four steps:

 * Configure the Filesystem (Move the downloaded files to a directory where they will run)
 * Configure Apache
 * Configure the Wiki
 * Set the proper rights

It is assumed that you have a working Apache installation and are somewhat familiar with the configuration files.


= Configure the Filesystem =

The subversion directory that you just checked out has three directories:  
  * '''installhtml''' is the webroot for the Wiki.  It contains the default html documents and images needed for the wiki install.  This directory contains the actual wiki data (currently a few default pages) as well the databases (which we will generate during the install).
  * '''LocalWiki''' is the actual python code.  These are imported whenever the wiki is run.  This directory will be the one you'll get updates from and hack (most often).  Once everything else is setup this will likely be all you want to update from the repository.  No content is stored here.
  * '''util_apps''' is a collection of commandline helper utilities as well as databases we use for things such as searching.

Choose a directory you would like to use as a base for the Wiki ( example: "/var/wiki").  Move all three directories to the base directory.  

= Configure Apache =

''rough draft''

Set up a VirtualHost definition for your Wiki.  You should include the following lines (substitute the base directory you used in the above step where it reads MYBASEINSTALLDIRECTORY):

{{{
AddHandler cgi-script .cgi
DirectoryIndex index.cgi
<Directory MYBASEINSTALLDIRECTORY/installhtml/>
  Options ExecCGI
</Directory>
}}}

an example entry might be:

{{{
<VirtualHost 192.168.1.55>
    ServerName t5.local
    ServerAlias www.t5.local
    ServerAdmin admin@mydomain.com
    DirectoryIndex index.cgi
    AddHandler cgi-script .cgi
    DocumentRoot /home/bob/www/mywiki/installhtml/
    ErrorLog /home/bob/www/log/mywiki.error
    CustomLog /home/bob/www/log/mywiki.access common
    <Directory /home/bob/www/mywiki/installhtml/>
      Options ExecCGI
    </Directory>
</VirtualHost>
}}}

 ''TODO: Update that entry to look a bit normal. I use t?.local in my hostfile to make it work.  Maybe a few links to Apache help pages?''

= Configure the Wiki =

 ''to write - including generating the databases''
   * You shouldn't need to generate any databases on install.  They might not be properly populated from the outset (the search ones, that is), but we should just {{{commit}}} a properly filled-up initial search/title search db.

= Set the proper rights =

 ''to write''

= Testing =

= Problem Resolution =


-------------------------
------------------------
--------------------------
-----
-----------------------
-----------------------
-----------------------

= Original Install Instructions =

''These are the original instructions that Philip wrote... I'm updating them, as I just did an install and took a page of notes, including a few steps he missed.  I'm leaving these here until my version is complete.  The above headings that lack content will be filled out soon'' -- ["JabberWokky"]

== First step ==
Throw {{{installhtml}}} into a place visable by apache.  Remember where you put it.  Put {{{LocalWiki}}} in a place where python can easily import it.  There is typically a python site package area somewhere on your system, but it's not even required to put it there.  Honestly, it might be best to just keep all these three directories right next to each other, something like this:
 * /var/ww/
  * /var/www/html (''example of where your apache DocumentRoot might be'')
    * installhtml/
  * util_apps/
  * LocalWiki/

== Stuff you've got to change ==
 * First step is fixing the monster of them all, {{{localwiki_config.py}}}, which is located in {{{installhtml/dwiki/}}}.  Explaining what each variable means is too hard, so I will just give you an example of configuration file and you'll probably figure it out:

=== Example 1 ===
Say my web root is /var/www/html and that's where I put all the above documents (as explained).  Then my localwiki_config.py will look like this (i have included only what needs to be changed.  '''this file is not complete'''--you need to include the other variables, but just don't change them):

'''remember:  no slashes at the end of file names'''
{{{

data_dir = '/var/www/html/installhtml/dwiki/data'

web_root = '/var/www/html/installhtml/'

web_dir = ''

app_dir = '/var/www/util_apps'

url_prefix = '/wiki'

relative_dir = 'index.cgi'

domain = 'localhost'

acl_rights_default = "AdminGroup:admin,read,write,delete,revert PhilipNeustrom:read,write,delete,revert,admin MikeIvanov:read,write,delete,revert,admin BannedGroup:read Trusted:read,write,revert,delete Known:read,write,delete,revert All:read"

attachments = {
    'dir': '/var/www/html/installhtml/dwiki/data/pages',
    'url': '/dwiki/data/pages',
}

mail_from = "dont_respond@localhost"

}}}

==== Other files you need to change ====
With the above alterations in mind, the first thing you need to fix is the path in {{{index.cgi}}}, which is located inside of {{{installhtml}}}.  In the above case, I change it to:
{{{
import sys
sys.path.extend(['/var/www','/var/www/html/installhtml/dwiki'])
}}}

The first part (/var/www) is where the LocalWiki libraries are located.  The second part is where the wiki data is located.

Next you need to change some of the scripts in {{{util_apps}}}.  You need to alter the lines in {{{add_to_index}}} and {{{remove_from_index}}} exactly as I did above for {{{index.cgi}}}.


...I think that's it?
